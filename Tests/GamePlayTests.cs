using System.Text.Json;
using System.Text.Json.Serialization;
using TronLightCycle.GameObjects;
using TronLightCycle.GameObjects.BoardElements;
using TronLightCycle.Serialization;

namespace TronDuel.Model.Tests
{
    [Collection("SequentialCollection")]
    public class GamePlayTests
    {
        public GamePlayTests()
        {
            //Player.ClearPlayerList();
        }

        [Fact]
        public void GameOnePlayerAutoWin()
        {
            Game game = JsonSerializer.Deserialize<Game>("{\"Players\":[{\"ID\":\"1bd8d7c6-33f3-4ced-9fed-d7cb3234a357\",\"Name\":\"Blevins\",\"Color\":{\"R\":113,\"G\":70,\"B\":204}},{\"ID\":\"3a0411f8-052e-46b2-8433-9f64b01d9592\",\"Name\":\"Close\",\"Color\":{\"R\":223,\"G\":38,\"B\":175}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"1bd8d7c6-33f3-4ced-9fed-d7cb3234a357\",\"Direction\":1,\"X\":4,\"Y\":10}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"1bd8d7c6-33f3-4ced-9fed-d7cb3234a357\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"1bd8d7c6-33f3-4ced-9fed-d7cb3234a357\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"1bd8d7c6-33f3-4ced-9fed-d7cb3234a357\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3a0411f8-052e-46b2-8433-9f64b01d9592\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3a0411f8-052e-46b2-8433-9f64b01d9592\"}},{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"3a0411f8-052e-46b2-8433-9f64b01d9592\"]}}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}")!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.EndEvent += (winner) =>
            {
                Assert.Equal("1bd8d7c6-33f3-4ced-9fed-d7cb3234a357", winner?.ID);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            Assert.Equal(GameState.Ended, game.State);
            Assert.True(hasBeenCalled);
        }

        [Fact]
        public void GameTwoPlayerInFrontOdd()
        {
            Game game = JsonSerializer.Deserialize<Game>("{\"Players\":[{\"ID\":\"8ce00935-7e4a-4dac-9d4a-13e8887b32e7\",\"Name\":\"Bacon\",\"Color\":{\"R\":124,\"G\":33,\"B\":246}},{\"ID\":\"f8613b89-3374-4a4a-8561-8fb9f72aa6ec\",\"Name\":\"Leon\",\"Color\":{\"R\":255,\"G\":0,\"B\":128}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"f8613b89-3374-4a4a-8561-8fb9f72aa6ec\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"f8613b89-3374-4a4a-8561-8fb9f72aa6ec\",\"Direction\":3,\"X\":20,\"Y\":9}},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"8ce00935-7e4a-4dac-9d4a-13e8887b32e7\",\"Direction\":2,\"X\":22,\"Y\":9}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"8ce00935-7e4a-4dac-9d4a-13e8887b32e7\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}")!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.EndEvent += (winner) =>
            {
                Assert.Null(winner);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            game.SimulateGameUpdate();
            Assert.True(hasBeenCalled);
        }

        [Fact]
        public void GameTwoPlayerInFrontEven()
        {
            Game game = JsonSerializer.Deserialize<Game>("{\"Players\":[{\"ID\":\"9ce00935-7e4a-4dac-9d4a-13e8887b32e7\",\"Name\":\"Bacon\",\"Color\":{\"R\":124,\"G\":33,\"B\":246}},{\"ID\":\"f9613b89-3374-4a4a-8561-8fb9f72aa6ec\",\"Name\":\"Leon\",\"Color\":{\"R\":255,\"G\":0,\"B\":128}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"f9613b89-3374-4a4a-8561-8fb9f72aa6ec\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"f9613b89-3374-4a4a-8561-8fb9f72aa6ec\",\"Direction\":3,\"X\":20,\"Y\":9}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"9ce00935-7e4a-4dac-9d4a-13e8887b32e7\",\"Direction\":2,\"X\":22,\"Y\":9}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"9ce00935-7e4a-4dac-9d4a-13e8887b32e7\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}")!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.EndEvent += (winner) =>
            {
                Assert.Null(winner);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            game.SimulateGameUpdate();
            Assert.True(hasBeenCalled);
        }

        [Fact]
        public void GameOnePlayerWallHit()
        {
            Game game = JsonSerializer.Deserialize<Game>(
                "{\"Players\":[{\"ID\":\"50345708-42e8-4cac-9609-e32b49651d53\",\"Name\":\"Hoffman\",\"Color\":{\"R\":215,\"G\":61,\"B\":183}},{\"ID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\",\"Name\":\"Vick\",\"Color\":{\"R\":183,\"G\":193,\"B\":29}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\",\"Direction\":4,\"X\":6,\"Y\":4}},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\",\"Direction\":2,\"X\":3,\"Y\":6}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}"
                //"{\"Players\":[{\"ID\":\"50345708-42e8-4cac-9609-e32b49651d53\",\"Name\":\"Hoffman\",\"Color\":{\"R\":215,\"G\":61,\"B\":183}},{\"ID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\",\"Name\":\"Vick\",\"Color\":{\"R\":183,\"G\":193,\"B\":29}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\",\"Direction\":4,\"X\":6,\"Y\":7}},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50345708-42e8-4cac-9609-e32b49651d53\"}},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\",\"Direction\":2,\"X\":3,\"Y\":5}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"96310b9c-a950-49f2-aa56-b0eccce7b227\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}"
                )!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.EndEvent += (winner) =>
            {
                Assert.Equal("96310b9c-a950-49f2-aa56-b0eccce7b227", winner?.ID);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            game.SimulateGameUpdate();
            Assert.True(hasBeenCalled);
        }

        [Fact]
        public void GameTwoPlayerWallHit()
        {
            Game game = JsonSerializer.Deserialize<Game>(
            "{\"Players\":[{\"ID\":\"7d53f3fe-8d65-4098-a716-914f7822a2a6\",\"Name\":\"Wilkinson\",\"Color\":{\"R\":76,\"G\":224,\"B\":70}},{\"ID\":\"e651a426-c1f0-4237-b15b-5be5444dfbc5\",\"Name\":\"Back\",\"Color\":{\"R\":253,\"G\":107,\"B\":10}}],\"Map\":{\"Coordinates\":[" +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]," +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]," +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]," +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"e651a426-c1f0-4237-b15b-5be5444dfbc5\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"e651a426-c1f0-4237-b15b-5be5444dfbc5\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"7d53f3fe-8d65-4098-a716-914f7822a2a6\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"7d53f3fe-8d65-4098-a716-914f7822a2a6\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"7d53f3fe-8d65-4098-a716-914f7822a2a6\",\"Direction\":3,\"X\":4,\"Y\":6}},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"e651a426-c1f0-4237-b15b-5be5444dfbc5\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]," +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"7d53f3fe-8d65-4098-a716-914f7822a2a6\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"e651a426-c1f0-4237-b15b-5be5444dfbc5\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]," +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"7d53f3fe-8d65-4098-a716-914f7822a2a6\"}},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"e651a426-c1f0-4237-b15b-5be5444dfbc5\",\"Direction\":2,\"X\":5,\"Y\":5}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"e651a426-c1f0-4237-b15b-5be5444dfbc5\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"e651a426-c1f0-4237-b15b-5be5444dfbc5\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"7d53f3fe-8d65-4098-a716-914f7822a2a6\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"7d53f3fe-8d65-4098-a716-914f7822a2a6\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]," +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]," +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]," +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]," +
            "[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}"
                )!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.EndEvent += (winner) =>
            {
                string str = JsonSerializer.Serialize(game.Map);
                Assert.Null(winner);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            game.SimulateGameUpdate();
            Assert.True(hasBeenCalled);
        }

        [Fact]
        public void GameOnePlayerBorderHit()
        {
            Game game = JsonSerializer.Deserialize<Game>(
                "{\"Players\":[{\"ID\":\"ba7bc92b-8c19-49d5-9607-e0530c9f6160\",\"Name\":\"Nielson\",\"Color\":{\"R\":224,\"G\":251,\"B\":222}},{\"ID\":\"2ae8458d-6049-4af6-a6f8-bb63b24997be\",\"Name\":\"Donovan\",\"Color\":{\"R\":12,\"G\":139,\"B\":115}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"ba7bc92b-8c19-49d5-9607-e0530c9f6160\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"ba7bc92b-8c19-49d5-9607-e0530c9f6160\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"ba7bc92b-8c19-49d5-9607-e0530c9f6160\",\"Direction\":3,\"X\":10,\"Y\":9}},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"2ae8458d-6049-4af6-a6f8-bb63b24997be\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"2ae8458d-6049-4af6-a6f8-bb63b24997be\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"2ae8458d-6049-4af6-a6f8-bb63b24997be\",\"Direction\":3,\"X\":8,\"Y\":8}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}"
                )!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.EndEvent += (winner) =>
            {
                Assert.Equal("2ae8458d-6049-4af6-a6f8-bb63b24997be", winner?.ID);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            game.SimulateGameUpdate();
            Assert.True(hasBeenCalled);
        }

        [Fact]
        public void GameTwoPlayerBorderHit()
        {
            Game game = JsonSerializer.Deserialize<Game>(
                "{\"Players\":[{\"ID\":\"c4a76830-ea8a-4f65-9cc8-535decccfd19\",\"Name\":\"Huddleston\",\"Color\":{\"R\":50,\"G\":70,\"B\":17}},{\"ID\":\"8b683714-75a6-4505-890c-a2863cb8d106\",\"Name\":\"Darby\",\"Color\":{\"R\":212,\"G\":186,\"B\":139}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"8b683714-75a6-4505-890c-a2863cb8d106\",\"Direction\":2,\"X\":1,\"Y\":7}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"8b683714-75a6-4505-890c-a2863cb8d106\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"8b683714-75a6-4505-890c-a2863cb8d106\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"8b683714-75a6-4505-890c-a2863cb8d106\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"8b683714-75a6-4505-890c-a2863cb8d106\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"8b683714-75a6-4505-890c-a2863cb8d106\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"8b683714-75a6-4505-890c-a2863cb8d106\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"c4a76830-ea8a-4f65-9cc8-535decccfd19\",\"Direction\":2,\"X\":1,\"Y\":3}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"c4a76830-ea8a-4f65-9cc8-535decccfd19\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"c4a76830-ea8a-4f65-9cc8-535decccfd19\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"c4a76830-ea8a-4f65-9cc8-535decccfd19\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"c4a76830-ea8a-4f65-9cc8-535decccfd19\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"c4a76830-ea8a-4f65-9cc8-535decccfd19\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"c4a76830-ea8a-4f65-9cc8-535decccfd19\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}"
                )!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.EndEvent += (winner) =>
            {
                Assert.Null(winner);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            game.SimulateGameUpdate();
            Assert.True(hasBeenCalled);
        }

        [Fact]
        public void GameThreePlayersMeet()
        {
            Game game = JsonSerializer.Deserialize<Game>(
                "{\"Players\":[{\"ID\":\"87fe1b49-e7a2-4387-92de-6119ddc5c047\",\"Name\":\"Padron\",\"Color\":{\"R\":137,\"G\":143,\"B\":87}},{\"ID\":\"584a4335-5296-427c-8640-389a72bc8c6b\",\"Name\":\"Machado\",\"Color\":{\"R\":9,\"G\":81,\"B\":224}},{\"ID\":\"fdee4bf0-bddb-444d-9bf5-15ad5b8c640b\",\"Name\":\"Norton\",\"Color\":{\"R\":231,\"G\":122,\"B\":47}},{\"ID\":\"2603e5b6-ccd8-46cc-a32b-9e017a83e390\",\"Name\":\"Duong\",\"Color\":{\"R\":108,\"G\":30,\"B\":98}},{\"ID\":\"d7552f7b-7552-451b-89ff-f0bc01fd52e3\",\"Name\":\"Erickson\",\"Color\":{\"R\":18,\"G\":185,\"B\":140}},{\"ID\":\"7d3dea26-1d94-4ab1-8bdf-d7648fa912f4\",\"Name\":\"Dias\",\"Color\":{\"R\":93,\"G\":176,\"B\":46}},{\"ID\":\"519fc791-0a7e-4e32-8f32-6d8c5ef652f6\",\"Name\":\"Crawford\",\"Color\":{\"R\":153,\"G\":181,\"B\":1}},{\"ID\":\"b95856af-2fb0-4b0d-a0b1-91f9d24afead\",\"Name\":\"Owen\",\"Color\":{\"R\":110,\"G\":187,\"B\":117}},{\"ID\":\"cf81332b-c191-40f9-be0c-da27f0b6af45\",\"Name\":\"Murphy\",\"Color\":{\"R\":74,\"G\":46,\"B\":212}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"d7552f7b-7552-451b-89ff-f0bc01fd52e3\",\"Direction\":3,\"X\":4,\"Y\":2}},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"584a4335-5296-427c-8640-389a72bc8c6b\",\"Direction\":2,\"X\":6,\"Y\":2}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"2603e5b6-ccd8-46cc-a32b-9e017a83e390\",\"Direction\":2,\"X\":9,\"Y\":2}},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"87fe1b49-e7a2-4387-92de-6119ddc5c047\",\"Direction\":1,\"X\":5,\"Y\":3}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"cf81332b-c191-40f9-be0c-da27f0b6af45\",\"Direction\":4,\"X\":8,\"Y\":4}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"fdee4bf0-bddb-444d-9bf5-15ad5b8c640b\",\"Direction\":1,\"X\":3,\"Y\":5}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"7d3dea26-1d94-4ab1-8bdf-d7648fa912f4\",\"Direction\":1,\"X\":4,\"Y\":6}},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"519fc791-0a7e-4e32-8f32-6d8c5ef652f6\",\"Direction\":4,\"X\":6,\"Y\":6}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"b95856af-2fb0-4b0d-a0b1-91f9d24afead\",\"Direction\":4,\"X\":8,\"Y\":8}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}"
                //"{\"Players\":[{\"ID\":\"87fe1b49-e7a2-4387-92de-6119ddc5c047\",\"Name\":\"Padron\",\"Color\":{\"R\":137,\"G\":143,\"B\":87}},{\"ID\":\"584a4335-5296-427c-8640-389a72bc8c6b\",\"Name\":\"Machado\",\"Color\":{\"R\":9,\"G\":81,\"B\":224}},{\"ID\":\"fdee4bf0-bddb-444d-9bf5-15ad5b8c640b\",\"Name\":\"Norton\",\"Color\":{\"R\":231,\"G\":122,\"B\":47}},{\"ID\":\"2603e5b6-ccd8-46cc-a32b-9e017a83e390\",\"Name\":\"Duong\",\"Color\":{\"R\":108,\"G\":30,\"B\":98}},{\"ID\":\"d7552f7b-7552-451b-89ff-f0bc01fd52e3\",\"Name\":\"Erickson\",\"Color\":{\"R\":18,\"G\":185,\"B\":140}},{\"ID\":\"7d3dea26-1d94-4ab1-8bdf-d7648fa912f4\",\"Name\":\"Dias\",\"Color\":{\"R\":93,\"G\":176,\"B\":46}},{\"ID\":\"519fc791-0a7e-4e32-8f32-6d8c5ef652f6\",\"Name\":\"Crawford\",\"Color\":{\"R\":153,\"G\":181,\"B\":1}},{\"ID\":\"b95856af-2fb0-4b0d-a0b1-91f9d24afead\",\"Name\":\"Owen\",\"Color\":{\"R\":110,\"G\":187,\"B\":117}},{\"ID\":\"cf81332b-c191-40f9-be0c-da27f0b6af45\",\"Name\":\"Murphy\",\"Color\":{\"R\":74,\"G\":46,\"B\":212}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"d7552f7b-7552-451b-89ff-f0bc01fd52e3\",\"Direction\":3,\"X\":4,\"Y\":9}},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"584a4335-5296-427c-8640-389a72bc8c6b\",\"Direction\":2,\"X\":6,\"Y\":9}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"2603e5b6-ccd8-46cc-a32b-9e017a83e390\",\"Direction\":2,\"X\":9,\"Y\":9}},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"87fe1b49-e7a2-4387-92de-6119ddc5c047\",\"Direction\":1,\"X\":5,\"Y\":8}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"cf81332b-c191-40f9-be0c-da27f0b6af45\",\"Direction\":4,\"X\":8,\"Y\":7}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"fdee4bf0-bddb-444d-9bf5-15ad5b8c640b\",\"Direction\":1,\"X\":3,\"Y\":6}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"7d3dea26-1d94-4ab1-8bdf-d7648fa912f4\",\"Direction\":1,\"X\":4,\"Y\":5}},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"519fc791-0a7e-4e32-8f32-6d8c5ef652f6\",\"Direction\":4,\"X\":6,\"Y\":5}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"b95856af-2fb0-4b0d-a0b1-91f9d24afead\",\"Direction\":4,\"X\":8,\"Y\":3}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}"
                )!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.UpdateEvent += (map, _) =>
            {
                Assert.True(map[2, 5] is DeadPlayer);
                Assert.Equal(3, (map[2, 5] as DeadPlayer)?.Players.Count ?? 0);
                Assert.Contains("d7552f7b-7552-451b-89ff-f0bc01fd52e3", (map[2, 5] as DeadPlayer)!.PlayerIDList);
                Assert.Contains("87fe1b49-e7a2-4387-92de-6119ddc5c047", (map[2, 5] as DeadPlayer)!.PlayerIDList);
                Assert.Contains("584a4335-5296-427c-8640-389a72bc8c6b", (map[2, 5] as DeadPlayer)!.PlayerIDList);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            Assert.True(hasBeenCalled);
        }

        //More is simply impossible, so I guess no more needed
        [Fact]
        public void GameFourPlayersMeet()
        {
            Game game = JsonSerializer.Deserialize<Game>(
                "{\"Players\":[{\"ID\":\"ccf01cb5-e24d-499f-9464-3060d3195179\",\"Name\":\"Stanley\",\"Color\":{\"R\":22,\"G\":96,\"B\":178}},{\"ID\":\"3c220167-7e0b-45af-bbb7-d58c38a84362\",\"Name\":\"Fisk\",\"Color\":{\"R\":43,\"G\":202,\"B\":76}},{\"ID\":\"3613c104-6195-4e0d-ad42-079872dd1659\",\"Name\":\"Sheets\",\"Color\":{\"R\":231,\"G\":56,\"B\":34}},{\"ID\":\"e25cb804-c447-49d4-b086-d39a71ef03a6\",\"Name\":\"Keene\",\"Color\":{\"R\":162,\"G\":168,\"B\":40}},{\"ID\":\"37a5526f-f8af-4e19-9280-80e3e6396a19\",\"Name\":\"Altman\",\"Color\":{\"R\":59,\"G\":210,\"B\":94}},{\"ID\":\"fe52e968-a12e-4354-83c3-4505314b03da\",\"Name\":\"Wirth\",\"Color\":{\"R\":142,\"G\":17,\"B\":110}},{\"ID\":\"c32b47eb-14df-4fe1-8f64-3e6ebcfe066a\",\"Name\":\"Vickery\",\"Color\":{\"R\":46,\"G\":51,\"B\":51}},{\"ID\":\"b4877e9a-7656-4e9a-b07b-6d78c34ff46e\",\"Name\":\"Stroud\",\"Color\":{\"R\":49,\"G\":18,\"B\":109}},{\"ID\":\"ecfcc616-3b99-477a-bfaf-23893ed4f5d4\",\"Name\":\"Ryder\",\"Color\":{\"R\":249,\"G\":172,\"B\":37}},{\"ID\":\"5c2ef1b2-564f-4b04-8790-6a27f3766ca4\",\"Name\":\"Windham\",\"Color\":{\"R\":241,\"G\":40,\"B\":40}},{\"ID\":\"5731bd37-4304-4413-99b2-569f4f2edf23\",\"Name\":\"Chaffin\",\"Color\":{\"R\":190,\"G\":37,\"B\":20}},{\"ID\":\"0fb4590a-8c8c-4128-b121-946c7ebd2c8c\",\"Name\":\"Erickson\",\"Color\":{\"R\":145,\"G\":245,\"B\":200}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"fe52e968-a12e-4354-83c3-4505314b03da\",\"Direction\":4,\"X\":6,\"Y\":5}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"c32b47eb-14df-4fe1-8f64-3e6ebcfe066a\",\"Direction\":3,\"X\":5,\"Y\":6}},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"5c2ef1b2-564f-4b04-8790-6a27f3766ca4\",\"Direction\":2,\"X\":7,\"Y\":6}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"37a5526f-f8af-4e19-9280-80e3e6396a19\",\"Direction\":1,\"X\":6,\"Y\":7}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"ecfcc616-3b99-477a-bfaf-23893ed4f5d4\",\"Direction\":3,\"X\":3,\"Y\":8}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"3613c104-6195-4e0d-ad42-079872dd1659\",\"Direction\":2,\"X\":4,\"Y\":9}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"ccf01cb5-e24d-499f-9464-3060d3195179\",\"Direction\":1,\"X\":7,\"Y\":9}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"0fb4590a-8c8c-4128-b121-946c7ebd2c8c\",\"Direction\":4,\"X\":8,\"Y\":9}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}\r\n                "
                //"{\"Players\":[{\"ID\":\"ccf01cb5-e24d-499f-9464-3060d3195179\",\"Name\":\"Stanley\",\"Color\":{\"R\":22,\"G\":96,\"B\":178}},{\"ID\":\"3c220167-7e0b-45af-bbb7-d58c38a84362\",\"Name\":\"Fisk\",\"Color\":{\"R\":43,\"G\":202,\"B\":76}},{\"ID\":\"3613c104-6195-4e0d-ad42-079872dd1659\",\"Name\":\"Sheets\",\"Color\":{\"R\":231,\"G\":56,\"B\":34}},{\"ID\":\"e25cb804-c447-49d4-b086-d39a71ef03a6\",\"Name\":\"Keene\",\"Color\":{\"R\":162,\"G\":168,\"B\":40}},{\"ID\":\"37a5526f-f8af-4e19-9280-80e3e6396a19\",\"Name\":\"Altman\",\"Color\":{\"R\":59,\"G\":210,\"B\":94}},{\"ID\":\"fe52e968-a12e-4354-83c3-4505314b03da\",\"Name\":\"Wirth\",\"Color\":{\"R\":142,\"G\":17,\"B\":110}},{\"ID\":\"c32b47eb-14df-4fe1-8f64-3e6ebcfe066a\",\"Name\":\"Vickery\",\"Color\":{\"R\":46,\"G\":51,\"B\":51}},{\"ID\":\"b4877e9a-7656-4e9a-b07b-6d78c34ff46e\",\"Name\":\"Stroud\",\"Color\":{\"R\":49,\"G\":18,\"B\":109}},{\"ID\":\"ecfcc616-3b99-477a-bfaf-23893ed4f5d4\",\"Name\":\"Ryder\",\"Color\":{\"R\":249,\"G\":172,\"B\":37}},{\"ID\":\"5c2ef1b2-564f-4b04-8790-6a27f3766ca4\",\"Name\":\"Windham\",\"Color\":{\"R\":241,\"G\":40,\"B\":40}},{\"ID\":\"5731bd37-4304-4413-99b2-569f4f2edf23\",\"Name\":\"Chaffin\",\"Color\":{\"R\":190,\"G\":37,\"B\":20}},{\"ID\":\"0fb4590a-8c8c-4128-b121-946c7ebd2c8c\",\"Name\":\"Erickson\",\"Color\":{\"R\":145,\"G\":245,\"B\":200}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"fe52e968-a12e-4354-83c3-4505314b03da\",\"Direction\":4,\"X\":6,\"Y\":7}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"c32b47eb-14df-4fe1-8f64-3e6ebcfe066a\",\"Direction\":3,\"X\":5,\"Y\":6}},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"5c2ef1b2-564f-4b04-8790-6a27f3766ca4\",\"Direction\":2,\"X\":7,\"Y\":6}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"37a5526f-f8af-4e19-9280-80e3e6396a19\",\"Direction\":1,\"X\":6,\"Y\":5}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"ecfcc616-3b99-477a-bfaf-23893ed4f5d4\",\"Direction\":3,\"X\":3,\"Y\":4}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"3613c104-6195-4e0d-ad42-079872dd1659\",\"Direction\":2,\"X\":4,\"Y\":3}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"ccf01cb5-e24d-499f-9464-3060d3195179\",\"Direction\":1,\"X\":7,\"Y\":3}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"0fb4590a-8c8c-4128-b121-946c7ebd2c8c\",\"Direction\":4,\"X\":8,\"Y\":3}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}"
                )!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.UpdateEvent += (map, _) =>
            {
                Assert.True(map[6, 6] is DeadPlayer);
                Assert.Equal(4, (map[6, 6] as DeadPlayer)?.Players.Count ?? 0);
                Assert.Contains("c32b47eb-14df-4fe1-8f64-3e6ebcfe066a", (map[6, 6] as DeadPlayer)!.PlayerIDList);
                Assert.Contains("37a5526f-f8af-4e19-9280-80e3e6396a19", (map[6, 6] as DeadPlayer)!.PlayerIDList);
                Assert.Contains("fe52e968-a12e-4354-83c3-4505314b03da", (map[6, 6] as DeadPlayer)!.PlayerIDList);
                Assert.Contains("5c2ef1b2-564f-4b04-8790-6a27f3766ca4", (map[6, 6] as DeadPlayer)!.PlayerIDList);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            Assert.True(hasBeenCalled);
        }

        [Fact]
        public void GamePlayerCrashesIntoDeadPlayer()
        {
            Game game = JsonSerializer.Deserialize<Game>(
                "{\"Players\":[{\"ID\":\"ffb5e257-00bb-4b10-9556-13b23debac23\",\"Name\":\"Greenfield\",\"Color\":{\"R\":22,\"G\":9,\"B\":135}},{\"ID\":\"fb10b1c4-f76a-4359-9fd7-f66268af91c8\",\"Name\":\"Clarke\",\"Color\":{\"R\":119,\"G\":10,\"B\":216}},{\"ID\":\"50664c7f-25c3-4a1b-b4f8-594a2e8ffb53\",\"Name\":\"Roberts\",\"Color\":{\"R\":236,\"G\":212,\"B\":108}},{\"ID\":\"c9e8907d-f1fd-43d4-b654-9f39b9698169\",\"Name\":\"McLain\",\"Color\":{\"R\":87,\"G\":5,\"B\":118}},{\"ID\":\"029d9c5a-38c5-43a1-b04c-d7969ae583f8\",\"Name\":\"Santos\",\"Color\":{\"R\":75,\"G\":174,\"B\":68}},{\"ID\":\"58fbc8d5-6811-430d-b124-cbd7c23e078b\",\"Name\":\"Goad\",\"Color\":{\"R\":102,\"G\":59,\"B\":248}},{\"ID\":\"fa1df040-484d-456b-9a91-a2269624a6cf\",\"Name\":\"Good\",\"Color\":{\"R\":254,\"G\":37,\"B\":26}},{\"ID\":\"38ab9405-b604-43e4-b949-475b57e6f8ca\",\"Name\":\"Franz\",\"Color\":{\"R\":160,\"G\":100,\"B\":213}},{\"ID\":\"eee4e2f7-371b-412b-98e1-0d5262cf5d99\",\"Name\":\"Martin\",\"Color\":{\"R\":210,\"G\":35,\"B\":221}},{\"ID\":\"20063f8e-6060-4e46-83a0-27853ad8aec8\",\"Name\":\"Beers\",\"Color\":{\"R\":35,\"G\":19,\"B\":66}},{\"ID\":\"c505e16c-b370-46a6-83ba-77e74b0afed9\",\"Name\":\"Brower\",\"Color\":{\"R\":29,\"G\":116,\"B\":163}},{\"ID\":\"24203556-2008-4858-80a1-d2c71ed482f6\",\"Name\":\"Johnston\",\"Color\":{\"R\":177,\"G\":235,\"B\":69}},{\"ID\":\"61ad2c30-3b7e-4760-9639-7bc16e6096e2\",\"Name\":\"Gary\",\"Color\":{\"R\":25,\"G\":119,\"B\":43}},{\"ID\":\"a4d39fc3-0020-46ff-98d4-f1fad70ccf18\",\"Name\":\"Burkhart\",\"Color\":{\"R\":78,\"G\":219,\"B\":57}},{\"ID\":\"f5422ac2-435b-4a3a-bcd8-0c2e2bb0b927\",\"Name\":\"Steiner\",\"Color\":{\"R\":113,\"G\":11,\"B\":83}},{\"ID\":\"61e5be4c-3189-4b45-b244-ca5fd92b25df\",\"Name\":\"McCord\",\"Color\":{\"R\":147,\"G\":44,\"B\":86}},{\"ID\":\"3e360915-d6aa-430a-94c2-888da14f9227\",\"Name\":\"Huston\",\"Color\":{\"R\":10,\"G\":171,\"B\":135}},{\"ID\":\"43bd4582-be2e-442a-89a2-19999bc70d57\",\"Name\":\"Hunter\",\"Color\":{\"R\":107,\"G\":215,\"B\":65}},{\"ID\":\"3478e96f-8ff4-4632-982d-4c14aba0460a\",\"Name\":\"Dickey\",\"Color\":{\"R\":5,\"G\":227,\"B\":116}},{\"ID\":\"0bec9126-438d-4db4-a1a4-55b2e0e8bf4e\",\"Name\":\"Ireland\",\"Color\":{\"R\":1,\"G\":161,\"B\":133}}],\"Map\":{\"Coordinates\":[[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"3e360915-d6aa-430a-94c2-888da14f9227\"]}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3e360915-d6aa-430a-94c2-888da14f9227\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3e360915-d6aa-430a-94c2-888da14f9227\"}},{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"43bd4582-be2e-442a-89a2-19999bc70d57\"]}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"43bd4582-be2e-442a-89a2-19999bc70d57\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fa1df040-484d-456b-9a91-a2269624a6cf\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fa1df040-484d-456b-9a91-a2269624a6cf\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fa1df040-484d-456b-9a91-a2269624a6cf\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fa1df040-484d-456b-9a91-a2269624a6cf\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fa1df040-484d-456b-9a91-a2269624a6cf\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fa1df040-484d-456b-9a91-a2269624a6cf\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"fa1df040-484d-456b-9a91-a2269624a6cf\",\"Direction\":3,\"X\":21,\"Y\":21}},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3e360915-d6aa-430a-94c2-888da14f9227\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"f5422ac2-435b-4a3a-bcd8-0c2e2bb0b927\",\"Direction\":2,\"X\":13,\"Y\":20}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"f5422ac2-435b-4a3a-bcd8-0c2e2bb0b927\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"f5422ac2-435b-4a3a-bcd8-0c2e2bb0b927\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"f5422ac2-435b-4a3a-bcd8-0c2e2bb0b927\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"f5422ac2-435b-4a3a-bcd8-0c2e2bb0b927\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"f5422ac2-435b-4a3a-bcd8-0c2e2bb0b927\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"f5422ac2-435b-4a3a-bcd8-0c2e2bb0b927\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"3478e96f-8ff4-4632-982d-4c14aba0460a\",\"Direction\":2,\"X\":4,\"Y\":19}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3478e96f-8ff4-4632-982d-4c14aba0460a\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3478e96f-8ff4-4632-982d-4c14aba0460a\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3478e96f-8ff4-4632-982d-4c14aba0460a\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3478e96f-8ff4-4632-982d-4c14aba0460a\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3478e96f-8ff4-4632-982d-4c14aba0460a\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"3478e96f-8ff4-4632-982d-4c14aba0460a\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"0bec9126-438d-4db4-a1a4-55b2e0e8bf4e\",\"Direction\":1,\"X\":20,\"Y\":19}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"c9e8907d-f1fd-43d4-b654-9f39b9698169\"]}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50664c7f-25c3-4a1b-b4f8-594a2e8ffb53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50664c7f-25c3-4a1b-b4f8-594a2e8ffb53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50664c7f-25c3-4a1b-b4f8-594a2e8ffb53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50664c7f-25c3-4a1b-b4f8-594a2e8ffb53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50664c7f-25c3-4a1b-b4f8-594a2e8ffb53\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"50664c7f-25c3-4a1b-b4f8-594a2e8ffb53\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"50664c7f-25c3-4a1b-b4f8-594a2e8ffb53\",\"Direction\":3,\"X\":13,\"Y\":18}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"0bec9126-438d-4db4-a1a4-55b2e0e8bf4e\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"0bec9126-438d-4db4-a1a4-55b2e0e8bf4e\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"029d9c5a-38c5-43a1-b04c-d7969ae583f8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"029d9c5a-38c5-43a1-b04c-d7969ae583f8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"029d9c5a-38c5-43a1-b04c-d7969ae583f8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"029d9c5a-38c5-43a1-b04c-d7969ae583f8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"029d9c5a-38c5-43a1-b04c-d7969ae583f8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"029d9c5a-38c5-43a1-b04c-d7969ae583f8\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"029d9c5a-38c5-43a1-b04c-d7969ae583f8\",\"Direction\":3,\"X\":18,\"Y\":16}},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"0bec9126-438d-4db4-a1a4-55b2e0e8bf4e\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"a4d39fc3-0020-46ff-98d4-f1fad70ccf18\",\"Direction\":2,\"X\":2,\"Y\":15}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"a4d39fc3-0020-46ff-98d4-f1fad70ccf18\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"a4d39fc3-0020-46ff-98d4-f1fad70ccf18\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"a4d39fc3-0020-46ff-98d4-f1fad70ccf18\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"a4d39fc3-0020-46ff-98d4-f1fad70ccf18\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"a4d39fc3-0020-46ff-98d4-f1fad70ccf18\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"a4d39fc3-0020-46ff-98d4-f1fad70ccf18\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"0bec9126-438d-4db4-a1a4-55b2e0e8bf4e\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"0bec9126-438d-4db4-a1a4-55b2e0e8bf4e\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"0bec9126-438d-4db4-a1a4-55b2e0e8bf4e\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"c505e16c-b370-46a6-83ba-77e74b0afed9\"]}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"c505e16c-b370-46a6-83ba-77e74b0afed9\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"c505e16c-b370-46a6-83ba-77e74b0afed9\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"c505e16c-b370-46a6-83ba-77e74b0afed9\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"58fbc8d5-6811-430d-b124-cbd7c23e078b\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"58fbc8d5-6811-430d-b124-cbd7c23e078b\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"58fbc8d5-6811-430d-b124-cbd7c23e078b\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"58fbc8d5-6811-430d-b124-cbd7c23e078b\"]}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"61e5be4c-3189-4b45-b244-ca5fd92b25df\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"eee4e2f7-371b-412b-98e1-0d5262cf5d99\"]}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"eee4e2f7-371b-412b-98e1-0d5262cf5d99\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"eee4e2f7-371b-412b-98e1-0d5262cf5d99\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"eee4e2f7-371b-412b-98e1-0d5262cf5d99\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"20063f8e-6060-4e46-83a0-27853ad8aec8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"20063f8e-6060-4e46-83a0-27853ad8aec8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"20063f8e-6060-4e46-83a0-27853ad8aec8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"20063f8e-6060-4e46-83a0-27853ad8aec8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"20063f8e-6060-4e46-83a0-27853ad8aec8\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"20063f8e-6060-4e46-83a0-27853ad8aec8\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"20063f8e-6060-4e46-83a0-27853ad8aec8\",\"Direction\":3,\"X\":14,\"Y\":16}},{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"61ad2c30-3b7e-4760-9639-7bc16e6096e2\",\"61e5be4c-3189-4b45-b244-ca5fd92b25df\"]}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"61ad2c30-3b7e-4760-9639-7bc16e6096e2\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"24203556-2008-4858-80a1-d2c71ed482f6\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"24203556-2008-4858-80a1-d2c71ed482f6\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"24203556-2008-4858-80a1-d2c71ed482f6\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"24203556-2008-4858-80a1-d2c71ed482f6\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"24203556-2008-4858-80a1-d2c71ed482f6\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"24203556-2008-4858-80a1-d2c71ed482f6\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"24203556-2008-4858-80a1-d2c71ed482f6\",\"Direction\":3,\"X\":11,\"Y\":6}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fb10b1c4-f76a-4359-9fd7-f66268af91c8\"}},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"38ab9405-b604-43e4-b949-475b57e6f8ca\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"38ab9405-b604-43e4-b949-475b57e6f8ca\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"38ab9405-b604-43e4-b949-475b57e6f8ca\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"38ab9405-b604-43e4-b949-475b57e6f8ca\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"38ab9405-b604-43e4-b949-475b57e6f8ca\"}},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"38ab9405-b604-43e4-b949-475b57e6f8ca\"}},{\"type\":\"trailbike\",\"bike\":{\"PlayerID\":\"38ab9405-b604-43e4-b949-475b57e6f8ca\",\"Direction\":3,\"X\":18,\"Y\":4}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fb10b1c4-f76a-4359-9fd7-f66268af91c8\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"ffb5e257-00bb-4b10-9556-13b23debac23\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fb10b1c4-f76a-4359-9fd7-f66268af91c8\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"ffb5e257-00bb-4b10-9556-13b23debac23\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"fb10b1c4-f76a-4359-9fd7-f66268af91c8\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"player-wall\",\"player\":{\"PlayerID\":\"ffb5e257-00bb-4b10-9556-13b23debac23\"}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}],[{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"fb10b1c4-f76a-4359-9fd7-f66268af91c8\"]}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"dead-player\",\"players\":{\"PlayerIDList\":[\"ffb5e257-00bb-4b10-9556-13b23debac23\"]}},{\"type\":\"empty\"},{\"type\":\"empty\"},{\"type\":\"empty\"}]]}}"
                )!;
            bool hasBeenCalled = false;
            typeof(Game).GetProperty(nameof(game.State))!.SetValue(game, GameState.Ongoing);
            game.UpdateEvent += (map, _) =>
            {
                Assert.IsType<DeadPlayer>(map[16, 15]);
                Assert.Equal(3, (map[16, 15] as DeadPlayer)?.Players.Count ?? 0);// there were two already, see if it's preserved
                Assert.Contains("20063f8e-6060-4e46-83a0-27853ad8aec8", (map[16, 15] as DeadPlayer)!.PlayerIDList);
                Assert.Contains("61ad2c30-3b7e-4760-9639-7bc16e6096e2", (map[16, 15] as DeadPlayer)!.PlayerIDList);
                Assert.Contains("61e5be4c-3189-4b45-b244-ca5fd92b25df", (map[16, 15] as DeadPlayer)!.PlayerIDList);
                hasBeenCalled = true;
            };
            game.SimulateGameUpdate();
            Assert.True(hasBeenCalled);
        }
    }
}
